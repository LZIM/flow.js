{"version":3,"sources":["node_modules/grunt-browserify/node_modules/browserify/node_modules/browser-pack/_prelude.js","src/add-ons/flow-inspector/flow-inspector.js"],"names":["FlowInspector","draw","el","elementTop","elementLeft","elementWidth","elementHeight","fillColor","ctx","getContext","fillStyle","fillRect","eraseCanvas","offset","clearRect","drawModalCanvas","$canvas","$","windowHeight","document","height","windowWidth","width","attr","append","get","getClassNames","elem","elemType","nodeName","toLowerCase","isInputElement","indexOf","classNames","push","join","canvas","$overlayContainer","elemCounter","each","index","$thisElemContainer","pos","css","top","left","children","length","innerWidth","innerHeight","attributes","nodeMap","wantedPrefix","replace","displayAttrName","chain","_","invoke","value","split","originalVal","shift","$type","text","$val","$newEl","forEach","val","cname","$conv","addClass","prepend","module","exports"],"mappings":"AAAA;ACAA,YAIA,IAAIA,eAAgB,WAEhB,QAASC,MAAKC,GAAIC,WAAYC,YAAaC,aAAcC,cAAeC,WACpE,GAAIC,KAAMN,GAAGO,WAAW,KACxBD,KAAIE,UAAYH,UAChBC,IAAIG,SAASP,YAAaD,WAAYE,aAAcC,eAExD,QAASM,aAAYV,GAAIC,WAAYC,YAAaC,aAAcC,eAC5D,GAAIE,KAAMN,GAAGO,WAAW,KACxB,IAAII,QAAS,CACbL,KAAIM,UAAUV,YAAcS,OAAQV,WAAaU,OAAQR,aAAgB,EAAIQ,OAASP,cAAiB,EAAIO,QAE/G,GAAIE,iBAAkB,WAClB,GAAIC,SAAUC,EAAE,oCAEhB,IAAIC,cAAeD,EAAEE,UAAUC,QAC/B,IAAIC,aAAcJ,EAAEE,UAAUG,OAC9BN,SAAQO,MACJD,MAAOD,YACPD,OAAQF,eAGZD,EAAE,QAAQO,OAAOR,QACjB,IAAId,IAAKc,QAAQS,IAAI,EAGrB,OAFAxB,MAAKC,GAAI,EAAG,EAAGmB,YAAaH,aAAc,kBAEnChB,GAGX,IAAIwB,eAAgB,SAAUC,KAAMJ,MAChC,GAAIK,UAAWD,KAAKE,SAASC,aAC7B,IAAIC,gBAAgE,MAA9C,QAAS,IAAK,UAAUC,QAAQJ,SAEtD,IAAIK,cAWJ,OAVAA,YAAWC,KAAKH,eAAiB,UAAY,YACjB,IAAxBR,KAAKS,QAAQ,QACbC,WAAWC,KAAK,QAES,IAAzBX,KAAKS,QAAQ,SACbC,WAAWC,KAAK,UAEY,IAA5BX,KAAKS,QAAQ,YACbC,WAAWC,KAAK,aAEbD,WAAWE,KAAK,KAG3BlB,GAAE,WAEE,GAAImB,QAASrB,iBAEb,IAAIsB,mBAAoBpB,EAAE,wCAC1B,IAAIqB,aAAc,CAClBrB,GAAE,MAAMsB,KAAK,SAAUC,MAAOb,MAC1BW,aACA,IAAIG,oBAAqBxB,EAAE,wBAA0BqB,YAAc,UAEnE,IAAII,KAAMzB,EAAEU,MAAMd,QAClB4B,oBAAmBE,KACfC,IAAMF,IAAIE,IAAM,GAAM,KACtBC,KAAOH,IAAQ,KAAI,OAGlBzB,EAAEU,MAAMmB,WAAWC,QACpBnC,YAAYwB,OAAQM,IAAIE,IAAKF,IAAIG,KAAM5B,EAAEU,MAAMqB,aAAc/B,EAAEU,MAAMsB,cAAgBtB,MAGzFV,EAAEU,KAAKuB,YAAYX,KAAK,SAAUC,MAAOW,SACrC,GAAI5B,MAAO4B,QAAQtB,QACnB,IAAIuB,cAAe,SACnB,IAAmC,IAA/B7B,KAAKS,QAAQoB,cAAqB,CAClC7B,KAAOA,KAAK8B,QAAQD,aAAc,GAElC,IAAIE,iBAAkB/B,KAAK8B,QAAQ,MAAO,GAC1C,IAAIE,OAAQC,EAAEC,OAAON,QAAQO,MAAMC,MAAM,KAAM,OAC/C,IAAIC,aAAcL,MAAMM,OAExB,IAAIC,OAAQ7C,EAAE,gCAAgC8C,KAAKT,gBACnD,IAAIU,MAAO/C,EAAE,+BAA+B8C,KAAKH,YAEjD,IAAIK,QAAShD,EAAE,gBAAgBO,OAAOsC,OAAOtC,OAAOwC,KAEpDT,OAAMW,QAAQ,SAAUC,KACpB,GAAIC,OAAgC,IAAvB7C,KAAKS,QAAQ,MAAe,QAAU,QACnD,IAAIqC,OAAQpD,EAAE,gBAAkBmD,MAAQ,YAAYL,KAAKI,IACzDF,QAAOzC,OAAO6C,SAElBJ,OAAOK,SAAS5C,cAAcC,KAAMJ,OACpCkB,mBAAmBjB,OAAOyC,WAWlC5B,kBAAkBb,OAAOiB,sBAE7BxB,EAAE,QAAQsD,QAAQlC,qBAI1BmC,QAAOC,QAAUzE","file":"bundle.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","'use strict';\n\n// var addControlPanel = require('./debug-legend-panel');\n\nvar FlowInspector = function () {\n\n    function draw(el, elementTop, elementLeft, elementWidth, elementHeight, fillColor) {\n        var ctx = el.getContext('2d');\n        ctx.fillStyle = fillColor;\n        ctx.fillRect(elementLeft, elementTop, elementWidth, elementHeight);\n    }\n    function eraseCanvas(el, elementTop, elementLeft, elementWidth, elementHeight) {\n        var ctx = el.getContext('2d');\n        var offset = 0;\n        ctx.clearRect(elementLeft - offset, elementTop - offset, elementWidth + (2 * offset), elementHeight + (2 * offset));\n    }\n    var drawModalCanvas = function () {\n        var $canvas = $('<canvas class=\"f-modal\"></canvas>');\n\n        var windowHeight = $(document).height();\n        var windowWidth = $(document).width();\n        $canvas.attr({\n            width: windowWidth,\n            height: windowHeight\n        });\n\n        $('body').append($canvas);\n        var el = $canvas.get(0);\n        draw(el, 0, 0, windowWidth, windowHeight, 'rgba(0,0,0,.4)');\n\n        return el;\n    };\n\n    var getClassNames = function (elem, attr) {\n        var elemType = elem.nodeName.toLowerCase();\n        var isInputElement = ['input', 'a', 'button'].indexOf(elemType) !== -1;\n\n        var classNames = [];\n        classNames.push(isInputElement ? 'f-input' : 'f-output');\n        if (attr.indexOf('on-') === 0) {\n            classNames.push('f-on');\n        }\n        if (attr.indexOf('bind') === 0) {\n            classNames.push('f-bind');\n        }\n        if (attr.indexOf('foreach') === 0) {\n            classNames.push('f-foreach');\n        }\n        return classNames.join(' ');\n    };\n\n    $(function () {\n\n        var canvas = drawModalCanvas();\n\n        var $overlayContainer = $('<div class=\"f-item-containers\"></div>');\n        var elemCounter = 0;\n        $(':f').each(function (index, elem) {\n            elemCounter++;\n            var $thisElemContainer = $('<div id=\"f-container-' + elemCounter + '\"></div');\n\n            var pos = $(elem).offset();\n            $thisElemContainer.css({\n                top: (pos.top - 25) + 'px',\n                left: (pos.left) + 'px'\n            });\n\n            if (!$(elem).children().length) {\n                eraseCanvas(canvas, pos.top, pos.left, $(elem).innerWidth(), $(elem).innerHeight(),  elem);\n            }\n\n            $(elem.attributes).each(function (index, nodeMap) {\n                var attr = nodeMap.nodeName;\n                var wantedPrefix = 'data-f-';\n                if (attr.indexOf(wantedPrefix) === 0) {\n                    attr = attr.replace(wantedPrefix, '');\n\n                    var displayAttrName = attr.replace('on-', '');\n                    var chain = _.invoke(nodeMap.value.split('|'), 'trim');\n                    var originalVal = chain.shift();\n\n                    var $type = $('<span class=\"f-type\"></span>').text(displayAttrName);\n                    var $val = $('<span class=\"f-val\"></span>').text(originalVal);\n\n                    var $newEl = $('<div> </div>').append($type).append($val);\n\n                    chain.forEach(function (val) {\n                        var cname = (attr.indexOf('on') === 0) ? 'f-val' : 'f-conv';\n                        var $conv = $('<span class=\"' + cname + '\"></span').text(val);\n                        $newEl.append($conv);\n                    });\n                    $newEl.addClass(getClassNames(elem, attr));\n                    $thisElemContainer.append($newEl);\n                }\n            });\n\n            // var evtName = 'f-select:type';\n            // addControlPanel($thisElemContainer, evtName);\n            // $thisElemContainer.on(evtName, function (data) {\n\n            // });\n\n\n            $overlayContainer.append($thisElemContainer);\n        });\n        $('body').prepend($overlayContainer);\n    });\n};\n\nmodule.exports = FlowInspector;\n"]}