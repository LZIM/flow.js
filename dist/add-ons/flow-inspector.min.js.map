{"version":3,"sources":["node_modules/grunt-browserify/node_modules/browserify/node_modules/browser-pack/_prelude.js","src/add-ons/flow-inspector/flow-inspector.js","src/add-ons/flow-inspector/panels/panel-manager.js","src/add-ons/flow-inspector/panels/context-show/context-show-panel.js","src/add-ons/flow-inspector/panels/legend-toggle/legend-panel.js","src/add-ons/flow-inspector/panels/panel-utils.js","src/add-ons/flow-inspector/panels/context-show/context-show.html","src/add-ons/flow-inspector/panels/legend-toggle/legend-panel.html","src/add-ons/flow-inspector/panels/context-show/context-extractor.js","src/add-ons/flow-inspector/panels/context-show/rules/julia-extract-rules.js","src/add-ons/flow-inspector/panels/context-show/rules/python-extract-rules.js"],"names":["panelManager","require","FlowInspector","root","draw","el","elementTop","elementLeft","elementWidth","elementHeight","fillColor","ctx","getContext","fillStyle","fillRect","eraseCanvas","offset","clearRect","overlayCanvas","$canvas","windowHeight","$","document","height","windowWidth","width","attr","get","drawModalCanvas","window","on","append","getClassNames","elem","elemType","nodeName","toLowerCase","isInputElement","indexOf","classNames","push","join","canvas","$overlayContainer","elemCounter","each","index","$thisElemContainer","pos","css","top","left","children","length","innerWidth","innerHeight","attributes","nodeMap","wantedPrefix","replace","displayAttrName","chain","_","invoke","value","split","originalVal","shift","$type","text","$val","$newEl","forEach","val","cname","$conv","addClass","evtName","addLegendPanel","getPanel","evt","type","toggleClass","addContextPanel","Flow","channel","run","getCurrentConfig","prepend","Inspector","module","exports","list","register","alias","handler","this","availablePanels","context","filter","panel","ContextExtractor","utils","$container","configFunction","template","$html","console","warn","config","modelType","model","info","file","F","service","File","getContents","then","response","extractor","$target","target","is","parent","find","variableName","trim","isFunction","showContext","html","fail","makeDraggable","stopPropagation","subType","trigger","xOffset","yOffset","isDragged","$element","preventDefault","clientX","clientY","JuliaExtractor","PythonExtractor","Extractor","modelName","modelContents","contents","extension","prototype","reference","pattern","fn","variable","startIndex","findIndex","start","fromStart","slice","endIndex","end","arr","regExp","RegExp","test","match","startValue","leadingSpacesInStart","indexOfLastGoodLine","every","line","leadingSpacesInLine"],"mappings":"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","file":"bundle.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","'use strict';\n\nvar panelManager = require('./panels/panel-manager');\n\nvar FlowInspector = function (root) {\n\n    function draw(el, elementTop, elementLeft, elementWidth, elementHeight, fillColor) {\n        var ctx = el.getContext('2d');\n        ctx.fillStyle = fillColor;\n        ctx.fillRect(elementLeft, elementTop, elementWidth, elementHeight);\n    }\n    function eraseCanvas(el, elementTop, elementLeft, elementWidth, elementHeight) {\n        var ctx = el.getContext('2d');\n        var offset = 0;\n        ctx.clearRect(elementLeft - offset, elementTop - offset, elementWidth + (2 * offset), elementHeight + (2 * offset));\n    }\n\n    var overlayCanvas = function ($canvas) {\n        var windowHeight = $(document).height();\n        var windowWidth = $(document).width();\n        $canvas.attr({\n            width: windowWidth,\n            height: windowHeight\n        });\n\n        var el = $canvas.get(0);\n        draw(el, 0, 0, windowWidth, windowHeight, 'rgba(0,0,0,.4)');\n    };\n\n    var drawModalCanvas = function () {\n        var $canvas = $('<canvas class=\"f-modal\"></canvas>');\n        overlayCanvas($canvas);\n        $(window).on('resize', function () {\n            overlayCanvas($canvas);\n        });\n        $(root).append($canvas);\n\n        return $canvas.get(0);\n    };\n\n    var getClassNames = function (elem, attr) {\n        var elemType = elem.nodeName.toLowerCase();\n        var isInputElement = ['input', 'a', 'button'].indexOf(elemType) !== -1;\n\n        var classNames = [];\n        classNames.push(isInputElement ? 'f-input' : 'f-output');\n        if (attr.indexOf('on-') === 0) {\n            classNames.push('f-on');\n        } else if (attr.indexOf('bind') === 0) {\n            classNames.push('f-bind');\n        } else if (attr.indexOf('foreach') === 0 || attr.indexOf('repeat') === 0) {\n            classNames.push('f-loop');\n        } else {\n            classNames.push('f-custom');\n        }\n        return classNames.join(' ');\n    };\n\n    $(function () {\n\n        var canvas = drawModalCanvas();\n\n        var $overlayContainer = $('<div class=\"f-item-containers\"></div>');\n\n        var elemCounter = 0;\n        $(':f').each(function (index, elem) {\n            elemCounter++;\n            var $thisElemContainer = $('<div id=\"f-container-' + elemCounter + '\"></div');\n\n            var pos = $(elem).offset();\n            $thisElemContainer.css({\n                top: (pos.top - 25) + 'px',\n                left: (pos.left) + 'px'\n            });\n\n            if (!$(elem).children().length) {\n                eraseCanvas(canvas, pos.top, pos.left, $(elem).innerWidth(), $(elem).innerHeight(),  elem);\n            }\n\n            $(elem.attributes).each(function (index, nodeMap) {\n                var attr = nodeMap.nodeName;\n                var wantedPrefix = 'data-f-';\n                if (attr.indexOf(wantedPrefix) === 0) {\n                    attr = attr.replace(wantedPrefix, '');\n\n                    var displayAttrName = attr.replace('on-', '');\n                    var chain = _.invoke(nodeMap.value.split('|'), 'trim');\n                    var originalVal = chain.shift();\n\n                    var $type = $('<span class=\"f-type\"></span>').text(displayAttrName);\n                    var $val = $('<span class=\"f-val\"></span>').text(originalVal);\n\n                    var $newEl = $('<div> </div>').append($type).append($val);\n\n                    chain.forEach(function (val) {\n                        var cname = (attr.indexOf('on') === 0) ? 'f-val' : 'f-conv';\n                        var $conv = $('<span class=\"' + cname + '\"></span').text(val);\n                        $newEl.append($conv);\n                    });\n                    $newEl.addClass(getClassNames(elem, attr));\n                    $thisElemContainer.append($newEl);\n                }\n            });\n            $overlayContainer.append($thisElemContainer);\n        });\n\n        //TODO: This is a little awkward, refactor to be more link backbone-views\n        var evtName = 'f-select:type';\n        var addLegendPanel = panelManager.getPanel('filter');\n        addLegendPanel($overlayContainer, evtName);\n        $overlayContainer.on(evtName, function (evt, type) {\n            $(root).toggleClass('hide-f-' + type);\n        });\n\n        var addContextPanel = panelManager.getPanel('context');\n        addContextPanel($overlayContainer, window.Flow.channel.run.getCurrentConfig);\n        $(root).prepend($overlayContainer);\n    });\n};\n\nwindow.Flow.Inspector = FlowInspector;\nmodule.exports = FlowInspector;\n","'use strict';\n\nvar panelManager = {\n    list: {},\n    register: function (alias, handler) {\n        this.list[alias] = handler;\n    },\n\n    getPanel: function (alias) {\n        return this.list[alias];\n    }\n};\n\n//bootstraps\nvar availablePanels = {\n    'context': require('./context-show/context-show-panel'),\n    'filter': require('./legend-toggle/legend-panel')\n};\n_.each(availablePanels, function (panel, alias) {\n    panelManager.register(alias, panel);\n});\n\nmodule.exports = panelManager;\n","'use strict';\n\nvar ContextExtractor = require('./context-extractor');\nvar utils = require('../../panels/panel-utils.js');\n\nmodule.exports = function ($container, configFunction) {\n    var template = require('./context-show.html');\n    var $html = $(template);\n\n    if (!configFunction) {\n        console.warn('You\\'re using an older version of FlowJS which does not support viewing model context.');\n        return false;\n    }\n\n    var config = configFunction();\n    var modelType = config.model.split('.')[1];\n    if (modelType === 'vmf') {\n        console.info('Cannot view context for Vensim models.');\n        return false;\n    }\n\n    var file = new F.service.File(config);\n    file.getContents(config.model, 'model')\n        .then(function (response) {\n            var extractor = new ContextExtractor(config.model, response);\n            $container.on('click', '.f-bind, .f-foreach, .f-on', function (evt) {\n                var $target = $(evt.target).is('.f-val') ? $(evt.target) : $(evt.target).parent().find('.f-val');\n                var variableName = $target.text().trim();\n                var isFunction = $target.parent().is('.f-on');\n                var context = extractor.showContext(variableName, isFunction);\n                $html.find('pre').html(context);\n            });\n            $container.append($html);\n        })\n        .fail(function () {\n            console.info('Could not get model file contents; this is only available if you\\'re logged in as an admin or team-member.');\n        });\n\n    utils.makeDraggable($html);\n};\n\n\n","'use strict';\nvar utils = require('../../panels/panel-utils.js');\nmodule.exports = function ($container, evtName) {\n    var template = require('./legend-panel.html');\n    var $html = $(template);\n\n    $container.append($html);\n    $container.on('click', ':checkbox', function (evt) {\n        evt.stopPropagation();\n        var $target = $(evt.target);\n        var type = $target.parent().attr('class').replace('f-', '');\n        var subType = $target.parent().children('[class^=f-]').attr('class').replace('f-', '');\n        $container.trigger(evtName, type + '-' + subType);\n    });\n    utils.makeDraggable($html);\n};\n","'use strict';\n\nmodule.exports = (function () {\n    var xOffset = 0;\n    var yOffset = 0;\n    var isDragged = false;\n\n    return {\n        makeDraggable: function ($element) {\n            $element.on('mousedown', function (evt) {\n                evt.preventDefault();\n                xOffset = evt.clientX - $element.offset().left;\n                yOffset = evt.clientY - $element.offset().top;\n                isDragged = $element;\n                return false;\n            });\n            $(window.document).on('mousemove', function (evt) {\n                if (isDragged === $element) {\n                    evt.stopPropagation();\n                    $element.css({\n                        top: evt.clientY - yOffset,\n                        left: evt.clientX - xOffset\n                    });\n                    return false;\n                }\n            });\n            $(window.document).on('mouseup', function (evt) {\n                isDragged = false;\n            });\n        }\n    };\n}());\n","module.exports = \"<div class=\\\"f-panel f-code-inspector\\\">\\n    <h6> Click on one of the variables on the right to inspect. </h6>\\n    <code>\\n        <pre>\\n\\n        </pre>\\n    </code>\\n</div>\\n\";\n","module.exports = \"<div class=\\\"f-legend-panel f-panel\\\">\\n    <h6> Outputs </h6>\\n\\n    <label class=\\\"f-output\\\">\\n        <input type=\\\"checkbox\\\" checked />\\n        <div class=\\\"f-bind\\\">\\n            <span class=\\\"f-type\\\">Bind</span>\\n            <span class=\\\"f-val\\\">Variable Name</span>\\n            <span class=\\\"f-conv\\\">Converters</span>\\n        </div>\\n    </label>\\n    <label class=\\\"f-output\\\">\\n        <input type=\\\"checkbox\\\" checked />\\n        <div class=\\\"f-loop\\\">\\n            <span class=\\\"f-type\\\">Loop</span>\\n            <span class=\\\"f-val\\\">Variable Name</span>\\n            <span class=\\\"f-conv\\\">Converters</span>\\n        </div>\\n    </label>\\n    <label class=\\\"f-output\\\">\\n        <input type=\\\"checkbox\\\" checked />\\n        <div class=\\\"f-custom\\\">\\n            <span class=\\\"f-type\\\">Custom</span>\\n            <span class=\\\"f-val\\\">Variable Name</span>\\n            <span class=\\\"f-conv\\\">Converters</span>\\n        </div>\\n    </label>\\n\\n    <h6> Inputs </h6>\\n    <label class=\\\"f-input\\\">\\n        <input type=\\\"checkbox\\\" checked />\\n        <div class=\\\"f-bind\\\">\\n            <span class=\\\"f-type\\\">Bind</span>\\n            <span class=\\\"f-val\\\">Variable Name</span>\\n            <span class=\\\"f-conv\\\">Converters</span>\\n        </div>\\n    </label>\\n\\n    <label class=\\\"f-input\\\">\\n        <input type=\\\"checkbox\\\" checked />\\n        <div class=\\\"f-on\\\">\\n            <span class=\\\"f-type\\\">Event</span>\\n            <span class=\\\"f-val\\\">Operation</span>\\n        </div>\\n    </label>\\n</div>\\n\";\n","'use strict';\n\nvar JuliaExtractor = require('./rules/julia-extract-rules');\nvar PythonExtractor = require('./rules/python-extract-rules');\n\nvar Extractor = function (modelName, modelContents) {\n    this.contents = modelContents.split(/\\n/);\n    var extension = modelName.split('.')[1];\n    if (extension === 'py') {\n        this.extractor = PythonExtractor;\n    } else if (extension === 'jl') {\n        this.extractor = JuliaExtractor;\n    }\n    return this;\n};\n\nExtractor.prototype.showContext = function (reference, isFunction) {\n    var pattern = (isFunction) ? this.extractor.fn : this.extractor.variable;\n    reference = reference.split(/[\\[\\.\\(]/)[0];\n\n    var startIndex = _.findIndex(this.contents, pattern.start(reference), this);\n    var fromStart = this.contents.slice(startIndex + 1);\n    var endIndex = pattern.end(fromStart, this.contents[startIndex]);\n\n    var offset = pattern.offset + 1;\n    if (endIndex === -1) {\n        endIndex = this.contents.length;\n        offset = 0;\n    }\n\n    var arr = this.contents.slice(startIndex, (startIndex + endIndex + offset));\n    return arr.join('\\n');\n};\n\nmodule.exports = Extractor;\n","'use strict';\n\nmodule.exports = {\n    fn: {\n        start: function (reference) {\n            var regExp = new RegExp('^\\\\s*?function\\\\s+' + reference);\n            return function (val) {\n                return regExp.test(val);\n            };\n        },\n        end: function (fromStart) {\n            return _.findIndex(fromStart, function (val, index) {\n                return val.match(/^end/);//ignore leading whitespaces to avoid returning early for nested ends\n            }, this);\n        },\n        offset: 1\n    },\n    variable: {\n        start: function (reference) {\n            var regExp = new RegExp('^\\\\s*?(global\\\\s*)?' + reference + '\\\\s?=');\n            return function (val) {\n                return regExp.test(val);\n            };\n        },\n        end: function (fromStart) {\n            return _.findIndex(fromStart, function (val, index) {\n                return val.trim() === '' || (val.indexOf('=') !== -1);\n            }, this);\n        },\n        offset: 0\n    }\n};\n","'use strict';\n\nmodule.exports = {\n    fn: {\n        start: function (reference) {\n            var regExp = new RegExp('^\\\\s*?def\\\\s+' + reference);\n            return function (val) {\n                return regExp.test(val);\n            };\n        },\n        end: function (fromStart, startValue) {\n            var leadingSpacesInStart = startValue.match(/^ */)[0].length;\n            var indexOfLastGoodLine = 0;\n            _.every(fromStart, function (line, index) {\n                var leadingSpacesInLine = line.match(/^ */)[0].length;\n                if (line.trim() !== '') {\n                    if (leadingSpacesInLine === leadingSpacesInStart) {\n                        return false;\n                    } else {\n                        indexOfLastGoodLine = index;\n                    }\n                }\n                return true;\n            });\n            return indexOfLastGoodLine + 1;\n        },\n        offset: 0\n    },\n    variable: {\n        start: function (reference) {\n            var regExp = new RegExp('^' + reference + '\\\\s?=');\n            return function (val) {\n                return regExp.test(val);\n            };\n        },\n        end: function (fromStart) {\n            return _.findIndex(fromStart, function (val, index) {\n                return val.trim() === '' || (val.indexOf('=') !== -1);\n            }, this);\n        },\n        offset: 0\n    }\n};\n"]}