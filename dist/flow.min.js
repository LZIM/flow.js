!function(t,e,n){function r(n,a){if(!e[n]){if(!t[n]){var s="function"==typeof require&&require;if(!a&&s)return s(n,!0);if(i)return i(n,!0);throw new Error("Cannot find module '"+n+"'")}var o=e[n]={exports:{}};t[n][0].call(o.exports,function(e){var i=t[n][1][e];return r(i?i:e)},o,o.exports)}return e[n].exports}for(var i="function"==typeof require&&require,a=0;a<n.length;a++)r(n[a]);return r}({1:[function(t){window.Flow=t("./flow.js"),window.Flow.version="0.6.3"},{"./flow.js":2}],2:[function(t,e){"use strict";var n=t("./dom/dom-manager"),r=t("./channels/channel-manager");e.exports={dom:n,initialize:function(t){var e=$("body").data("f-model"),i={channel:{account:"",project:"",model:e},dom:{}},a=$.extend(!0,{},i,t);this.channel=t&&t.channel&&t.channel instanceof r?t.channel:new r(a.channel),n.initialize($.extend(!0,{channel:this.channel}))}}},{"./dom/dom-manager":3,"./channels/channel-manager":4}],3:[function(t,e){e.exports=function(){"use strict";var e=t("../config"),n=t("./nodes/node-manager.js"),r=t("./attributes/attribute-manager.js"),i=t("../converters/converter-manager.js"),a=t("../utils/parse-utils");$.expr[":"][e.prefix]=function(t){var n=$(t),r=_.keys(n.data()),i=_.find(r,function(t){return 0===t.indexOf(e.prefix)});return!!i},$.expr[":"].webcomponent=function(t){return-1!==t.nodeName.indexOf("-")};var s={nodes:n,attributes:r,converters:i,"private":{},initialize:function(t){var s={root:"body",channel:null};$.extend(s,t);var o=s.channel,u=this,c=$(s.root);$(function(){var t=c.find(":"+e.prefix);c.is(":"+e.prefix)&&(t=t.add($(s.root))),u.private.matchedElements=t,$.each(t,function(t,e){var i=$(e),a=n.getHandler(i);new a.handle({el:e});var s=i.data("variable-attr-map");s||(s={},$(e.attributes).each(function(t,e){var n=e.nodeName,a=e.value,o="data-f-";if(0===n.indexOf(o)){n=n.replace(o,"");var u=r.getHandler(n,i),c=!0;if(u&&u.init&&(c=u.init.call(i,n,a)),c){var l=_.invoke(a.split("|"),"trim");l.length>1&&(a=l.shift(),i.data("f-converters-"+n,l));var f=/,(?![^\[]*\])/;a.split(f).length>1||(s[a]=n)}}}),i.data("variable-attr-map",s));var u=Object.keys(s);u.length&&o.variables.subscribe(Object.keys(s),i)}),c.off(e.events.react).on(e.events.react,function(t,e){var n=$(t.target),a=n.data("variable-attr-map");$.each(e,function(t,e){var s=a[t.trim()];if(s){var o=n.data("f-converters-"+s);if(!o&&"bind"===s){if(o=n.data("f-convert"),!o){var u=n.closest("[data-f-convert]");u&&(o=u.data("f-convert"))}o&&(o=o.split("|"))}var c=i.convert(e,o);s=s.toLowerCase();var l=r.getHandler(s,n);l.handle.call(n,c,s)}})}),c.off(e.events.trigger).on(e.events.trigger,function(t,e){var n={},r=$(t.target),s=r.data("f-converters-bind");if(!s){if(s=r.data("f-convert"),!s){var u=r.closest("[data-f-convert]");u&&(s=u.data("f-convert"))}s&&(s=s.split("|"))}_.each(e,function(t,e){e=e.split("|")[0].trim(),t=i.parse(t,s),n[e]=a.toImplicitType(t)}),o.variables.publish(n)}),c.off("f.ui.operate").on("f.ui.operate",function(t,e){e=$.extend(!0,{},e),_.each(e.operations,function(t){t.params=_.map(t.params,function(t){return a.toImplicitType($.trim(t))})}),o.operations.publish(e)})})}};return $.extend(this,s)}()},{"./nodes/node-manager.js":5,"./attributes/attribute-manager.js":6,"../converters/converter-manager.js":7,"../config":8,"../utils/parse-utils":9}],4:[function(t,e){"use strict";var n=t("./variables-channel"),r=t("./operations-channel");e.exports=function(t){t||(t={});var e=t,i=new F.service.Run(e);window.run=i;var a=i.create(t.model);i.currentPromise=a;var s=function(t,e){return _.wrap(t,function(t){var n=_.toArray(arguments).slice(1);return i.currentPromise.then(function(){return i.currentPromise=t.apply(e,n),i.currentPromise})})};_.each(i,function(t,e){$.isFunction(t)&&"variables"!==e&&(i[e]=s(t,i))});var o=i.variables();_.each(o,function(t,e){$.isFunction(t)&&(o[e]=s(t,o))}),this.run=i,this.variables=new n({run:i,vent:this}),this.operations=new r({run:i,vent:this})}},{"./variables-channel":10,"./operations-channel":11}],8:[function(t,e){e.exports={prefix:"f",defaultAttr:"bind",binderAttr:"f-bind",events:{trigger:"update.f.ui",react:"update.f.model"}}},{}],9:[function(t,e){"use strict";e.exports={toImplicitType:function(t){var e=/^(?:\{.*\}|\[.*\])$/,n=t;return"string"==typeof t&&(t=t.trim(),"true"===t?n=!0:"false"===t?n=!1:"null"===t?n=null:"undefined"===t?n="":"'"===n.charAt(0)||'"'===n.charAt(0)?n=t.substring(1,t.length-1):$.isNumeric(t)?n=+t:e.test(t)&&(n=$.parseJSON(t))),n}}},{}],11:[function(t,e){"use strict";e.exports=function(t){t||(t={});var e=t.run,n=t.vent,r={listenerMap:{},refresh:function(t,e){$(n).trigger("dirty",{opn:t,response:e})},publish:function(t){var n=this;if(t.operations){var r=t.serial?e.serial:e.parallel;return r.call(e,t.operations).then(function(e){n.refresh.call(n,_(t.operations).pluck("name"),e)})}return e.do.apply(e,arguments).then(function(e){n.refresh.call(n,t,e)})},subscribe:function(t,e){t=[].concat(t),e.on||(e=$(e));var n=_.uniqueId("epichannel.operation"),r={id:n,target:e},i=this;return $.each(t,function(t,e){i.listenerMap[e]=i.listenerMap[e].concat(r)}),n},unsubscribe:function(t,e){this.listenerMap=_.reject(this.listenerMap,function(t){return t.id===e})},unsubscribeAll:function(){this.listenerMap=[]}};return $.extend(this,r)}},{}],7:[function(t,e){"use strict";var n=function(t,e){var n=[];return _.isFunction(e)?n.push({alias:t,convert:e}):_.isObject(e)&&e.convert?(e.alias=t,n.push(e)):_.isObject(t)&&(t.convert?n.push(t):$.each(t,function(t,e){n.push({alias:t,convert:e})})),n},r=function(t,e){return _.isString(e.alias)?t===e.alias:_.isFunction(e.alias)?e.alias(t):_.isRegex(e.alias)?e.alias.match(t):!1},i={"private":{matchConverter:r},list:[],register:function(t,e){var r=n(t,e);this.list=r.concat(this.list)},replace:function(t,e){var i;_.each(this.list,function(e,n){return r(t,e)?(i=n,!1):void 0}),this.list.splice(i,1,n(t,e)[0])},getConverter:function(t){return _.find(this.list,function(e){return r(t,e)})},convert:function(t,e){if(!e||!e.length)return t;e=[].concat(e),e=_.invoke(e,"trim");var n=t,r=this;return _.each(e,function(t){var e=r.getConverter(t);n=e.convert(n,t)}),n},parse:function(t,e){if(!e||!e.length)return t;e=[].concat(e).reverse(),e=_.invoke(e,"trim");var n=t,r=this;return _.each(e,function(t){var e=r.getConverter(t);e.parse&&(n=e.parse(n,t))}),n}},a=[t("./number-converter"),t("./string-converter"),t("./array-converter"),t("./numberformat-converter")];$.each(a.reverse(),function(t,e){i.register(e)}),e.exports=i},{"./number-converter":12,"./string-converter":13,"./array-converter":14,"./numberformat-converter":15}],5:[function(t,e){"use strict";var n=function(t,e){return _.isFunction(e)&&(e={handle:e}),t||(t="*"),e.selector=t,e},r=function(t,e){return _.isString(t)?t===e.selector:$(t).is(e.selector)},i={list:[],register:function(t,e){this.list.unshift(n(t,e))},getHandler:function(t){return _.find(this.list,function(e){return r(t,e)})},replace:function(t,e){var r;_.each(this.list,function(e,n){return t===e.selector?(r=n,!1):void 0}),this.list.splice(r,1,n(t,e))}},a=[t("./input-checkbox-node"),t("./default-input-node"),t("./default-node")];_.each(a.reverse(),function(t){i.register(t.selector,t)}),e.exports=i},{"./input-checkbox-node":16,"./default-input-node":17,"./default-node":18}],6:[function(t,e){"use strict";var n=[t("./no-op-attr"),t("./events/init-event-attr"),t("./events/default-event-attr"),t("./binds/checkbox-radio-bind-attr"),t("./binds/input-bind-attr"),t("./class-attr"),t("./positive-boolean-attr"),t("./negative-boolean-attr"),t("./binds/default-bind-attr"),t("./default-attr")],r=[],i=function(t,e,n){return e||(e="*"),_.isFunction(n)&&(n={handle:n}),$.extend(n,{test:t,target:e})};$.each(n,function(t,e){r.push(i(e.test,e.target,e))});var a=function(t,e,n){var r;return _.isString(t)?r="*"===t||t.toLowerCase()===e.toLowerCase():_.isFunction(t)?r=t(e,n):_.isRegExp(t)&&(r=e.match(t)),r},s=function(t,e){return _.isString(e)?e===t:e.is(t)};e.exports={list:r,register:function(){r.unshift(i.apply(null,arguments))},filter:function(t,e){var n=_.select(r,function(e){return a(e.test,t)});return e&&(n=_.select(n,function(t){return s(t.target,e)})),n},replace:function(t,e,n){var o;_.each(r,function(n,r){return a(n.test,t)&&s(n.target,e)?(o=r,!1):void 0}),r.splice(o,1,i(t,e,n))},getHandler:function(t,e){var n=this.filter(t,e);return n[0]}}},{"./no-op-attr":19,"./events/init-event-attr":20,"./events/default-event-attr":21,"./binds/checkbox-radio-bind-attr":22,"./binds/input-bind-attr":23,"./class-attr":24,"./positive-boolean-attr":25,"./negative-boolean-attr":26,"./binds/default-bind-attr":27,"./default-attr":28}],10:[function(t,e){"use strict";var n=t("../config");e.exports=function(t){t||(t={});var e=t.run.variables(),r=t.vent,i={},a=function(){return!1},s=function(t){var e=t.match(/<(.*?)>/g);return e=_.map(e,function(t){return t.substring(1,t.length-1)})},o=function(t,e){var n={},r={};return _.each(t,function(t,i){var a=s(i),o=i;$.each(a,function(t,n){var r=e[n];null!==r&&void 0!==r&&(_.isArray(r)&&(r=r[r.length-1]),i=i.replace("<"+n+">",r))}),n[i]=o,r[i]=t}),{interpolated:r,interpolationMap:n}},u={"private":{getInnerVariables:s,interpolate:o},innerVariablesList:[],variableListenerMap:{},refresh:function(){var t=this,n=function(n,r){return e.query(n).then(function(e){_.each(e,function(e,n){var s=i[n];if(!a(e,s)){i[n]=e;var o=r&&r[n]?r[n]:n;t.notify(o,e)}})})};return t.innerVariablesList.length?e.query(t.innerVariablesList).then(function(e){$.extend(i,e);var r=o(t.variableListenerMap,e),a=_.keys(r.interpolated);n(a,r.interpolationMap)}):n(_.keys(t.variableListenerMap))},notify:function(t,e){var r=this.variableListenerMap[t],i={};i[t]=e,_.each(r,function(t){t.target.trigger(n.events.react,i)})},publish:function(t,n){var r;$.isPlainObject(t)?r=t:(r={})[t]=n;var a=o(r,i).interpolated,s=this;e.save.call(e,a).then(function(){s.refresh.call(s)})},subscribe:function(t,e){t=[].concat(t),e.on||(e=$(e));var n=_.uniqueId("epichannel.variable"),r={id:n,target:e},i=this;return $.each(t,function(t,e){var n=s(e);n.length&&(i.innerVariablesList=i.innerVariablesList.concat(n)),i.innerVariablesList=_.uniq(i.innerVariablesList),i.variableListenerMap[e]||(i.variableListenerMap[e]=[]),i.variableListenerMap[e]=i.variableListenerMap[e].concat(r)}),n},unsubscribe:function(t,e){this.variableListenerMap=_.reject(this.variableListenerMap,function(t){return t.id===e})},unsubscribeAll:function(){this.variableListenerMap={},this.innerVariablesList=[]}};$.extend(this,u);var c=this;$(r).on("dirty",function(){c.refresh.apply(c,arguments)})}},{"../config":8}],12:[function(t,e){"use strict";e.exports={alias:"i",convert:function(t){return parseFloat(t,10)}}},{}],13:[function(t,e){"use strict";e.exports={s:function(t){return t+""},upperCase:function(t){return(t+"").toUpperCase()},lowerCase:function(t){return(t+"").toLowerCase()},titleCase:function(t){return t+="",t.replace(/\w\S*/g,function(t){return t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()})}}},{}],15:[function(t,e){"use strict";e.exports={alias:function(t){return-1!==t.indexOf("#")||-1!==t.indexOf("0")},parse:function(t){t+="";var e="-"===t.charAt(0);t=t.replace(/,/g,"");var n,r=/([-+]?[0-9]*\.?[0-9]+)(K?M?B?%?)/i,i=r.exec(t),a="";switch(i&&i[1]&&(n=i[1]),i&&i[2]&&(a=i[2].toLowerCase()),a){case"%":n/=100;break;case"k":n=1e3*n;break;case"m":n=1e6*n;break;case"b":n=1e9*n}return n=parseFloat(n),e&&n>0&&(n=-1*n),n},convert:function(){function t(t,e){t=0===t?0:n(t,Math.max(0,e-Math.ceil(Math.log(t)/Math.LN10)));for(var r="",i=t.toString(),a=!1,s=0;s<i.length;s++)if(r+=i.charAt(s),"."===i.charAt(s)?a=!0:e--,0>=e)return r;for(a||(r+=".");e>0;)r+="0",e--;return r}function e(t,e,n,r){r=r||!0;var i=t.toString(),a=i.split(".").length>1,s=0;if(r)for(var o=i.length-1;o>0;o--)a?a="."!==i.charAt(o):(s=(s+1)%3,0===s&&(i=i.substr(0,o)+","+i.substr(o)));if(e>0){var u;for(i.split(".").length<=1?(u=n,u>0&&(i+=".")):u=n-i.split(".")[1].length;u>0;)i+="0",u--}return i}function n(t,e){return Math.round(t*Math.pow(10,e))/Math.pow(10,e)}function r(t){t=t.replace(".","");var e=t.split(new RegExp("[0|,|#]+","g"));return e.length>1?e[1].toString():""}function i(t){var e=$.trim(t);return"$"===e||"â‚¬"===e||"Â¥"===e||"Â£"===e||"â‚¡"===e||"â‚±"===e||"KÄ?"===e||"kr"===e||"Â¢"===e||"â‚ª"===e||"Æ’"===e||"â‚©"===e||"â‚«"===e?!0:!1}function a(o,u){if(_.isArray(o)&&(o=o[o.length-1]),!_.isString(o)&&!_.isNumber(o))return o;if(!u||"default"===u.toLowerCase())return o.toString();if(isNaN(o))return"?";u=u.replace("&euro;","â‚¬");var c=u.split(";");if(c.length>1)return a(Math.abs(o),c[o>=0?0:1]);var l=o>=0?"":"-";o=Math.abs(o);var f=u,p=f.indexOf(".");p>-1&&(f=f.substring(0,p));var h=f.toLowerCase(),v=h.lastIndexOf("s"),d=v>-1;if(d){var g=f.charAt(v+1);" "===g&&(d=!1)}var b=d?u.substring(0,v):"",m=u.substr(d?v+1:v);if(d){var x=/[0-9#*]/,$=m.match(x);$&&0!==$.length||(d=!1,b="")}if(d){var y=0===o?0:Math.floor(Math.log(Math.abs(o))/(3*Math.LN10));if(y=o/Math.pow(10,3*y)<1e3?y:y+1,y=Math.max(y,0),y=Math.min(y,4),o/=Math.pow(10,3*y),isNaN(Number(m))||-1!==m.indexOf(".")){u=u.substr(v+1);var w=r(u);u=u.substr(0,u.length-w.length);var M=a((""===l?1:-1)*o,u)+s[y]+w;return i(b)&&""!==l?(M=M.substr(l.length),l+b+M):b+M}var L=Number(m);return o<Math.pow(10,L)?i(b)?l+b+t(o,Number(m))+s[y]:b+l+t(o,Number(m))+s[y]:i(b)?l+b+Math.round(o)+s[y]:b+l+Math.round(o)+s[y]}var k,A,C=u.split(".");C.length>1?(k=C[1].length-C[1].replace(new RegExp("[0|#]+","g"),"").length,A=C[1].length-C[1].replace(new RegExp("0+","g"),"").length,u=C[0]+C[1].replace(new RegExp("[0|#]+","g"),"")):k=0;var O=u.split(new RegExp("[0|,|#]+","g")),j=O[0].toString(),N=O.length>1?O[1].toString():"";o*=u.split("%").length>1?100:1,o=n(o,k),l=0===o?"":l;var S=","===u.substr(u.length-4-N.length,1),F=l+j+e(o,k,A,S)+N;return F}var s=["","K","M","B","T"];return a}()}},{}],14:[function(t,e){"use strict";e.exports={list:function(t){return[].concat(t)},last:function(t){return t=[].concat(t),t[t.length-1]},first:function(t){return t=[].concat(t),t[0]},previous:function(t){return t=[].concat(t),t.length<=1?t[0]:t[t.length-2]}}},{}],19:[function(t,e){"use strict";e.exports={target:"*",test:/^(?:model|convert)$/i,handle:$.noop,init:function(){return!1}}},{}],20:[function(t,e){"use strict";e.exports={target:"*",test:function(t){return 0===t.indexOf("on-init")},init:function(t,e){t=t.replace("on-init","");var n=this;return $(function(){var t=_.invoke(e.split("|"),"trim");t=t.map(function(t){var e=t.split("(")[0],n=t.substring(t.indexOf("(")+1,t.indexOf(")")),r=""!==$.trim(n)?n.split(","):[];return{name:e,params:r}}),n.trigger("f.ui.operate",{operations:t,serial:!0})}),!1}}},{}],21:[function(t,e){"use strict";e.exports={target:"*",test:function(t){return 0===t.indexOf("on-")},init:function(t,e){t=t.replace("on-","");var n=this;return this.on(t,function(){var t=_.invoke(e.split("|"),"trim");t=t.map(function(t){var e=t.split("(")[0],n=t.substring(t.indexOf("(")+1,t.indexOf(")")),r=""!==$.trim(n)?n.split(","):[];return{name:e,params:r}}),n.trigger("f.ui.operate",{operations:t,serial:!0})}),!1}}},{}],22:[function(t,e){"use strict";e.exports={target:":checkbox,:radio",test:"bind",handle:function(t){_.isArray(t)&&(t=t[t.length-1]);var e=this.attr("value"),n=void 0!==e?e==t:!!t;this.prop("checked",n)}}},{}],23:[function(t,e){"use strict";e.exports={target:"input, select",test:"bind",handle:function(t){_.isArray(t)&&(t=t[t.length-1]),this.val(t)}}},{}],24:[function(t,e){"use strict";e.exports={test:"class",target:"*",handle:function(t,e){_.isArray(t)&&(t=t[t.length-1]);var n=this.data("added-classes");n||(n={}),n[e]&&this.removeClass(n[e]),_.isNumber(t)&&(t="value-"+t),n[e]=t,this.addClass(t),this.data("added-classes",n)}}},{}],25:[function(t,e){"use strict";e.exports={target:"*",test:/^(?:checked|selected|async|autofocus|autoplay|controls|defer|ismap|loop|multiple|open|required|scoped)$/i,handle:function(t,e){_.isArray(t)&&(t=t[t.length-1]);var n=this.attr("value")?t==this.prop("value"):!!t;this.prop(e,n)}}},{}],26:[function(t,e){"use strict";e.exports={target:"*",test:/^(?:disabled|hidden|readonly)$/i,handle:function(t,e){_.isArray(t)&&(t=t[t.length-1]),this.prop(e,!t)}}},{}],27:[function(t,e){"use strict";e.exports={target:"*",test:"bind",handle:function(t){_.isArray(t)&&(t=t[t.length-1]),this.html(t)}}},{}],28:[function(t,e){"use strict";e.exports={test:"*",target:"*",handle:function(t,e){this.prop(e,t)}}},{}],16:[function(t,e){"use strict";var n=t("./default-input-node");e.exports=n.extend({propertyHandlers:[],getUIValue:function(){var t=this.$el,e=void 0!==t.data("f-off")?t.data("f-off"):0,n=void 0!==t.attr("value")?t.prop("value"):1,r=t.is(":checked")?n:e;return r},initialize:function(){n.prototype.initialize.apply(this,arguments)}},{selector:":checkbox,:radio"})},{"./default-input-node":17}],17:[function(t,e){"use strict";var n=t("../../config"),r=t("./default-node");e.exports=r.extend({propertyHandlers:[],uiChangeEvent:"change",getUIValue:function(){return this.$el.val()},initialize:function(){var t=this;this.$el.on(this.uiChangeEvent,function(){var e=t.getUIValue(),r=t.$el.data(n.binderAttr),i={};i[r]=e,t.$el.trigger(n.events.trigger,i)}),r.prototype.initialize.apply(this,arguments)}},{selector:"input, select"})},{"../../config":8,"./default-node":18}],18:[function(t,e){"use strict";var n=t("./base");e.exports=n.extend({propertyHandlers:[],initialize:function(){}},{selector:"*"})},{"./base":29}],29:[function(t,e){"use strict";var n=function(t,e){var n,r=this;n=t&&_.has(t,"constructor")?t.constructor:function(){return r.apply(this,arguments)},_.extend(n,r,e);var i=function(){this.constructor=n};return i.prototype=r.prototype,n.prototype=new i,t&&_.extend(n.prototype,t),n.__super__=r.prototype,n},r=function(t){this.$el=$(t.el),this.el=t.el,this.initialize.apply(this,arguments)};_.extend(r.prototype,{initialize:function(){}}),r.extend=n,e.exports=r},{}]},{},[1]);