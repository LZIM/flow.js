<!doctype html>
<html>

<head>
    <title>Google Glass Simulation</title>

    <!-- flow.js coding with visualizations, step 0:

        In addition to the required libraries we used previously, we need two more in order to add visualizations to our interface.

        * [`platform.js`](https://forio.com/tools/web-components/vendor/platform/platform.js) provides infrastructure for supporting our custom web components
        * [`contour-chart.html`](https://forio.com/tools/web-components/contour/contour-chart.html) defines these web components
    -->

    <script src="//forio.com/tools/web-components/vendor/platform/platform.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.2/jquery.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/lodash.js/2.4.1/lodash.min.js"></script>
    <script src="//forio.com/tools/js-libs/1.0/epicenter.min.js"></script>
    <script src="//forio.com/tools/js-libs/flow/0.4/flow.js"></script>
    <link rel="import" href="https://forio.com/tools/web-components/contour/contour-chart.html">

    <style>
        .chart {
            width: 600px;
        }
    </style>

    <script>

/* flow.js coding, step 1: same as previously.
    
    Call the Flow.initialize() method. This tells flow.js to create and initialize a run for you. (Runs are sets of particular user interactions with your project.)

*/
    $(function(){ Flow.initialize(); });
    </script>

</head>

<!-- flow.js coding, step 2: same as previously.
    In order to finish initializing a run, flow.js needs to know the name of the model. Add the attribute `data-f-model` to the <body> tag. Set the value to the name of your model file.

    To call a method from the model when the run is first created, add the attribute `data-f-on-init` to the <body> tag. Set the value to the name of the method.

    For Vensim models, the `start_game` method is automatically provided, and initializes the model. 

-->

<body data-f-model="model.vmf" data-f-on-init="start_game" >


<!-- flow.js coding, step 3: same as previously
    You can bind variables from the model in your interface by setting the `data-f-bind` attribute. This binding is bi-directional, meaning that as the model changes, the interface is automatically updated; and when users change values in the interface, the model is automatically updated.

    Add the `data-f-bind` to any HTML element that normally takes a value. Set the value of `data-f-bind` to the name of the variable.

    Use [] for arrays and <> to reference other variables.

    In this model, `currentstep` is a model variable that tells us the current Vensim year.
-->

    <p>Current year is: <span data-f-bind="time[<currentstep>]"></span></p>

    <p>Sales for X5: <span data-f-bind="Sales[<currentstep>,X5]"></span></p>
    <p>Sales for X6: <span data-f-bind="Sales[<currentstep>,X6]"></span></p>
    <p>Sales for X7: <span data-f-bind="Sales[<currentstep>,X7]"></span></p>


<!-- flow.js coding: step 4. NEW!!
    The web component <contour-chart> uses our model's Sales and Time variables. As with other HTML components, we simply preface attributes with `data-f-` and then include the model variable names.
-->

    <div class="chart">
    <contour-chart data-f-source="Sales" yaxistitle="Sales" data-f-categories="Time" data-f-legend="Version"><line-chart></line-chart></contour-chart>
    </div>

    <p>Change prices:</p>
    <p>Price for X5: <input type="text" data-f-bind="Price[<currentstep>,X5]"/></p>
    <p>Price for X6: <input type="text" data-f-bind="Price[<currentstep>,X6]"/></p>
    <p>Price for X7: <input type="text" data-f-bind="Price[<currentstep>,X7]"/></p>

<!-- flow.js coding, step 5: same as previous (previous step 4)
    To call a method from the model at the user's request, add the `data-f-` prefix to an attribute of an element that accepts a user action. Set the value to the method call. For example, here we're adding `data-f-on-click` to a `<button>`. You could also add `data-f-on-submit` to a form, etc.
-->

    <button data-f-on-click="step(1)">Advance one time step</button>


<!-- flow.js coding, step 6: More information available at: forio.com/epicenter/docs/public/data_binding_flow_js/ -->

</body>



</html>


