<html>

<head>
    <script src="/node_modules/jquery/dist/jquery.min.js"></script>
    <script src="/node_modules/lodash/lodash.js"></script>
    <script src="/node_modules/epicenter-js/dist/epicenter.min.js"></script>
    <script src="/dist/flow-edge.js"></script>
</head>

<body data-f-model="">

    <label for="txtPrice">Price</label>
    <input type="text" id="txtPrice" />
    <div id="priceop"></div>
    <br>

    <label for="txtName">Name</label>
    <input type="text" id="txtName" />
    <div id="nameop"></div>

    <button id="btnStep">Step</button>
    <script>
    var sm = new Flow.SubsManager({
        scenario: {
            serviceOptions: {
                account: 'team-naren',
                project: 'authenticated-smart-watch',
                model: 'model.vmf',
            },
            // // initialOperation: 'start_game',
            // variables: {
            //     readOnly: false,
            //     silent: false,
            // },
            // operations: {
            //     silent: true,
            // }
        }
    });

    sm.subscribe(['baseline:meta:name'], function (val) {
        $('#nameop').html(val['meta:name']);
        console.log('Meta Subscribe callback called', val);
    });
    sm.subscribe(['baseline:variable:Price'], function (val) {
        $('#priceop').html(val['variable:Price']);
        console.log('Basline Variable Subscribe callback called', val);
    });
    sm.subscribe(['current:variable:Price'], function (val) {
        console.log('Current Variable Subscribe callback called', val);
    });
    // sm.subscribe(['variable:Revenue'], function (val) {
    //     console.log('Variable Subscribe callback called', val);
    // });
    // sm.subscribe(['operation:step'], function (val) {
    //     console.log('Operation Subscribe callback called', val);
    // });

    // $('#txtPrice').on('change', function (evt) {
    //     var val = Number($(evt.target).val());
    //     sm.publish('variable:Price', val);
    // });
    // $('#txtName').on('change', function (evt) {
    //     var val = ($(evt.target).val());
    //     sm.publish('meta:name', val);
    // });

    // $('#btnStep').on('click', function (evt) {
    //     sm.publish('operation:step');
    // });
    window.sm = sm;
    </script>
</body>

</html>
